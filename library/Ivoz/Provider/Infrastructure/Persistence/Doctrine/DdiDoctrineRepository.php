<?php

namespace Ivoz\Provider\Infrastructure\Persistence\Doctrine;

use Doctrine\Bundle\DoctrineBundle\Repository\ServiceEntityRepository;
use Ivoz\Provider\Domain\Model\Ddi\Ddi;
use Ivoz\Provider\Domain\Model\Ddi\DdiInterface;
use Ivoz\Provider\Domain\Model\Ddi\DdiRepository;
use Symfony\Bridge\Doctrine\RegistryInterface;

/**
 * DdiDoctrineRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class DdiDoctrineRepository extends ServiceEntityRepository implements DdiRepository
{
    public function __construct(RegistryInterface $registry)
    {
        parent::__construct($registry, Ddi::class);
    }

    /**
     * @return \Ivoz\Provider\Domain\Model\Ddi\DdiInterface | null
     */
    public function findOneByDdiE164AndBrand(string $ddiE164, int $brandId)
    {
        /** @var DdiInterface $response */
        $response = $this->findOneBy([
            "ddie164" => $ddiE164,
            "brand" => $brandId
        ]);

        return $response;
    }

    /**
     * @return \Ivoz\Provider\Domain\Model\Ddi\DdiInterface | null
     */
    public function findOneByDdiAndCountryAndBrand(string $ddi, int $countryId, int $brandId)
    {
        /** @var DdiInterface $response */
        $response = $this->findOneBy([
            'ddi' => $ddi,
            'country' => $countryId,
            'brand' => $brandId
        ]);

        return $response;
    }
}
